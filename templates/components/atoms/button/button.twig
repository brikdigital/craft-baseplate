{% set htmlTag = url is defined and url|length ? 'a' : 'button' %}
{% set theme = theme is defined and theme|length ? theme : 'primary' %}
{% set size = size is defined and size|length ? size : 'large' %}
{% set text = text is defined and text|length ? text : 'Meer info'|t %}
{% set target = target is defined and target|length ? target : '_self' %}
{% set icon = icon is defined ? icon : false %}
{% set iconPosition = iconPosition is defined ? iconPosition : 'left' %}
{% set type = type is defined and type|length ? type : 'button' %}
{% set fullWidth = fullWidth is defined ? fullWidth : 'auto' %}
{% set buttonClasses = buttonClasses is defined and buttonClasses|length ? buttonClasses : false %}
{% set rel = rel is defined ? rel : false %}
{% set role = role is defined ? role : false %}
{% set disabled = disabled is defined and disabled|length ? disabled : false %}
{% set baseClasses = 'inline-flex items-center justify-center font-bold text-base transition ease-in-out duration-150' %}

{% switch theme %}
	{% case 'primary' %}
		{% set themeClasses = 'bg-primary text-white hover:text-primary hover:bg-secondary' %}
	{% case 'secondary' %}
		{% set themeClasses = 'bg-secondary text-primary hover:bg-primary hover:text-secondary' %}
	{% case 'textDark' %}
		{% set themeClasses = 'text-black border-b border-current hover:text-secondary' %}
	{% case 'textLight' %}
		{% set themeClasses = 'text-white border-b border-current hover:text-primary' %}
{% endswitch %}

{% set attributes = {
	class: [baseClasses|join(' '), themeClasses|join(' '),]
} %}

{% switch size %}
	{% case 'large' %}
        {% set fontSize = 'text-18' %}
		{% set padding = 'px-5 py-3' %}
	{% case 'small' %}
        {% set fontSize = 'text-16' %}
		{% set padding = 'px-3 py-2' %}
{% endswitch %}

{% switch fullWidth %}
	{% case "allways" %}
		{% set attributes = attributes|merge({class: [attributes.class|join(' '), 'w-full']}) %}
	{% case "mobile" %}
		{% set attributes = attributes|merge({class: [attributes.class|join(' '), 'w-full', 'md:w-auto']}) %}
{% endswitch %}

{% if theme starts with 'text' %}
	{% set attributes = attributes|merge({class: [attributes.class|join(' '), fontSize|join(' ')]}) %}
{% else %}
	{% set attributes = attributes|merge({class: [attributes.class|join(' '), fontSize|join(' '), padding|join(' ')]}) %}
{% endif %}

{% if buttonClasses %}
	{% set attributes = attributes|merge({class: [attributes.class|join(' '), buttonClasses|join(' ')]}) %}
{% endif %}

{% if htmlTag == 'a' %}
	{% set attributes = attributes|merge({href: url}) %}

    {% if target %}
        {% set attributes = attributes|merge({target: target}) %}
        {% if target == '_blank'%}
            {% set attributes = attributes|merge({rel: 'noopener noreferrer'}) %}
        {% endif %}
    {% endif %}

	{% if rel %}
		{% set attributes = attributes|merge({rel: rel|join(' ')}) %}
	{% endif %}
{% else %}
    {% set attributes = attributes|merge({role: role}) %}

	{% if type %}
		{% set attributes = attributes|merge({type: type}) %}
	{% endif %}

	{% if disabled == true %}
		{% set attributes = attributes|merge({'aria-disabled': 'true' }) %}
		{% set attributes = attributes|merge({tabindex: '-1' }) %}
		{% set attributes = attributes|merge({class: [attributes.class|join(' '), 'cursor-not-allowed opacity-50']}) %}
	{% endif %}
{% endif %}

<{{ htmlTag }} {{attr(attributes)}}>
    {% apply spaceless %}
		{% if icon and iconPosition == 'left' %}
			{{ inlineSvg(icon, 'mr-2 size-5 fill-current', { sanitize: true, namespace: true }) }}
		{% endif %}

		{{ text }}

		{% if icon and iconPosition == 'right' %}
			{{ inlineSvg(icon, 'ml-2 size-5 fill-current', { sanitize: true, namespace: true }) }}
		{% endif %}
    {% endapply %}
</{{ htmlTag }}>